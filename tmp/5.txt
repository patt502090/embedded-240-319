=========================5.1=======================================
#include <avr/io.h>
#include <avr/interrupt.h>

int main(void)
{
    // --- ??????? Port ---
    // ??????? PORTD ??? PORTB ??????????? Output
    DDRD = 0xFF;
    DDRB = 0xFF;
    ADMUX = 0b00100000;

    // --- ??????????????? ---
    while (1)
    {
        // ?????????????????? Analog ???? Digital
        ADCSRA = 0b11000111;

        // ???????????????????????????? (???????? ADIF ????????? 1)
        while (!(ADCSRA & (1 << ADIF)));


        // ????????? 8 ????? (MSB) ????????? PORTD
        PORTD = ADCH;

        // ????????? 2 ??????? (LSB) ????????? 2 ????????? PORTB
        // ADCL ??????????? [ADC1, ADC0, 0, 0, 0, 0, 0, 0] ????? ADLAR=1
        // ???????????????????????? 6 ????? ?????????????? [0, 0, 0, 0, 0, 0, ADC1, ADC0]
        PORTB = (ADCL >> 6);
    }
  }

=========================5.1=======================================

void setup() {
  DDRD = 0xFF;          // ???????? PORTD ???? output
  DDRC = 0x00;          // ???????? PORTC ???? input (????????? ADC)
  ADMUX = 0b01000000;   // ???????? ADC0, ????????????????? AVcc
  ADCSRA = 0b10000111;  // ?????????? ADC ??? prescaler = 128
}

void loop() {
  ADCSRA |= (1 << ADSC);             // ???????????? ADC
  while (ADCSRA & (1 << ADSC));      // ??????????????????????

  int x = ADC;                       // ???????????????? ADC

  if (x < 113)
    PORTD = 0x00;
  else if (x < 227)
    PORTD = 0x01;
  else if (x < 342)
    PORTD = 0x03;
  else if (x < 455)
    PORTD = 0x07;
  else if (x < 569)
    PORTD = 0x0F;
  else if (x < 684)
    PORTD = 0x1F;
  else if (x < 799)
    PORTD = 0x3F;
  else if (x < 911)
    PORTD = 0x7F;
  else
    PORTD = 0xFF;
}
